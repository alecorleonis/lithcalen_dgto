<p id="notice"><%= notice %></p>
<h1>Listing Items From List: <%= List.find_by_id(params[:list_id]).list_name %>, From User: <%= User.find_by_id(List.find_by_id(params[:list_id]).user_id).username %></h1>

<table>
  <thead>
    <tr>
      <th>Item name</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @items = Item.where(:list_id => params[:list_id]) %>
    <% @items.each do |item| %>
      <tr>
<ul>
        <td><%= item.item_name %></td>
        <td><%= link_to 'Show', item_path(:id => item.id, :list_id => item.list_id) %></td>
	<% if current_user.id == User.find_by_id(List.find_by_id(params[:list_id]).user_id).id %>
          <td><%= link_to 'Edit', edit_item_path(:id => item.id, :list_id => item.list_id) %></td>
          <td><%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
	<% end %>
</ul>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if current_user.id == User.find_by_id(List.find_by_id(params[:list_id]).user_id).id %>
  <%= link_to 'New Item', {:controller => :items, :action=>'new', :list_id => params[:list_id]} %> |
<% end %>
<% @uli = User.find_by_id(List.find_by_id(params[:list_id]).user_id) %>
<% if current_user.id != @uli.id %>
  <%= link_to 'Back to users lists', lists_path(:user => @uli) %> |
<% end %> 
<%= link_to 'Back to my lists', lists_path(:user => current_user.id) %>
